  <plugin id="darkmatter.fps" name="FPS Meter" version="0.1" author="Dark Matter">
    <channel screen="@replay/ready" snap="top">
      <script async type="module">
        import React, { useRef, useEffect } from 'react';
        import { registerComponent, useStore } from "titan-reactor";

        registerComponent({ channelId: "_channel_id_" }, ({ userConfig }) => {

          const fpsElRef = useRef();

          /**
           * Efficient update example:
           * Use the store subscribe function for transient updates, skipping the vdiff.
           * https://github.com/pmndrs/zustand#transient-updates-for-often-occuring-state-changes
           */
          useEffect(() => useStore.subscribe(
            state => {
              if (fpsElRef.current && state.frame && fpsElRef.current.textContent !== state.frame.fps) {
                fpsElRef.current.textContent = state.frame.fps;
              }
            }
          ), []);

          return <p ref={fpsElRef} style={{ fontSize: userConfig.fontSize.value, color: "white" }}></p>
        });
        </script>
    </channel>
  </plugin>